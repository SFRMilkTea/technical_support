{% extends 'base.html' %}

{% block title %}Категории{% endblock %}

{% block content %}

<h1>Категории</h1>

{% if messages %}
<div class="messages-container">
    {% for message in messages %}
    <div class="message-box {% if message.tags %}{{ message.tags }}{% endif %}">
        <span>{{ message }}</span>
        <button class="close-button" onclick="this.parentElement.style.display='none';">&times;</button>
    </div>
    {% endfor %}
</div>
{% endif %}
<script>
     function showForm() {
        var form = document.getElementById("addCategoryForm");
        if (form.style.display === "none" || form.style.display === "") {
            form.style.display = "block";
        } else {
            form.style.display = "none";
        }
    }
</script>

<div id="addCategoryForm" class="form-container">
    <h2>Добавить категорию</h2>
    <form method="POST">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Сохранить</button>
        <button type="button" class="cancel-button" onclick="showForm()">Отмена</button>
    </form>
</div>
<table>
    <tr>
        <th>Название категории</th>
        <th>
            <button class="add-button" onclick="showForm()">+</button>
        </th>
    </tr>
    {% for category in categories %}
    <tr>
        <td>{{ category.name }}</td>
        <td>
            <a href="{% url 'delete_category' category.id %}" class="delete-button"
               onclick="return confirm('Вы уверены, что хотите удалить эту категорию?');">
                Удалить
            </a>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}